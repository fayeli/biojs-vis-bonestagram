<!doctype html>
<html lang="en">
	<head>
		<title>Bonestagram</title>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<link href='https://fonts.googleapis.com/css?family=Nunito' rel='stylesheet' type='text/css'>
		<link href='https://fonts.googleapis.com/css?family=Lora' rel='stylesheet' type='text/css'>
		<link href='https://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css'>
		<style>
			html {
				height: 100%;
				margin: 0;
			}
			body {
				margin: 0;
				height: 100%;
			}

			h2 {
				font-family: 'Nunito', sans-serif;
				color: #333333;
				letter-spacing: 1px;
				text-align: center
			}

			p {
				font-family: 'Open Sans', sans-serif;
				color: #5a5a5a;
				margin: 5px;
				text-align: center;
			}

			img, embed, object, video {
				max-width: 100%;
			}
			nav a, button {
				min-width: 48px;
				min-height: 48px;
			}

			.container {
				display: flex;
				display: -webkit-flex;
				flex-flow: row wrap;
				-webkit-flex-flow: row wrap;
				width: 100%;
			}

			#container1{
				height: 100%;
				flex-flow: column nowrap;
				-webkit-flex-flow: column nowrap;
				justify-content: center;
				align-items: center;
			}

			#container2{
				background: #ededed;
				flex-flow: column nowrap;
				-webkit-flex-flow: column nowrap;
				justify-content: center;
				align-items: center;
				padding-top: 40px;
				padding-bottom: 100px;
				position: absolute;
			}

			#upload_btn{
				padding: 20px;
    			width: 150px;
    			height: 150px;
    			border-radius: 75px;
    			background: #FF9779;
    			text-transform: uppercase;
    			outline: 0;
    			cursor: pointer;
    			letter-spacing: 2px;
    			color: #ffffff;
    			border: 0px;
    			position: absolute;
    			top: 75%;
			}
			#upload_btn:hover{
				background: #ffab93;
			}

			#container3{
				
				height: 100%
			}

			.bonestagram_container{
				background: #FF9779;
				width: 400px;
				height: 300px;
			}

			.ui_container{
				width: 400px;
				height: 80px;
				display: flex;
				display: -webkit-flex;
				flex-flow: row wrap;
				-webkit-flex-flow: row wrap;
				justify-content: center;
				align-items: center;
			}

			@-webkit-keyframes fadeIn {
				from { opacity:0; }
				to { opacity:1; }
			}
			@-moz-keyframes fadeIn {
				from { opacity:0; }
				to { opacity:1; }
			}
			@keyframes fadeIn {
				from { opacity:0; }
				to { opacity:1; }
			}

			.fadeIn{
				opacity: 0;
				-webkit-animation: fadeIn ease-in 1;
				-moz-animation: fadeIn ease-in 1;
				animation: fadeIn ease-in 1;
				-webkit-animation-fill-mode: forwards;
				-moz-animation-fill-mode: forwards;
				animation-fill-mode: forwards;
				-webkit-animation-duration: 1s;
				-moz-animation-duration: 1s;
				animation-duration: 1s;
				-webkit-animation-delay: 2.0s;
				-moz-animation-delay: 2.0s;
				animation-delay: 2.0s;
			}

			@-webkit-keyframes fadeOut {
				from { opacity:1; }
				to { opacity:0; }
			}
			@-moz-keyframes fadeOut {
				from { opacity:1; }
				to { opacity:0; }
			}
			@keyframes fadeOut {
				from { opacity:1; }
				to { opacity:0; }
			}

			.fadeOut{
				opacity: 1;
				-webkit-animation: fadeOut ease-in 1;
				-moz-animation: fadeOut ease-in 1;
				animation: fadeOut ease-in 1;
				-webkit-animation-fill-mode: forwards;
				-moz-animation-fill-mode: forwards;
				animation-fill-mode: forwards;
				-webkit-animation-duration: 3s;
				-moz-animation-duration: 3s;
				animation-duration: 3s;
				-webkit-animation-delay: 0.0s;
				-moz-animation-delay: 0.0s;
				animation-delay: 0.0s;
			}

			@-webkit-keyframes slideDown {
				0% {
					-webkit-transform: translate(0,-100%);
				}
				50%{
					-webkit-transform: translate(0,8%);
				}
				65%{
					-webkit-transform: translate(0,-4%);
				}
				80%{
					-webkit-transform: translate(0,4%);
				}
				95%{
					-webkit-transform: translate(0,-2%);
				}
				100%{
					opacity: 1;
					-webkit-transform: translate(0,0%);
				}
			}

			@-moz-keyframes slideDown {
				0% {
					-moz-transform: translate(0,-100%);
				}
				50%{
					-moz-transform: translate(0,8%);
				}
				65%{
					-moz-transform: translate(0,-4%);
				}
				80%{
					-moz-transform: translate(0,4%);
				}
				95%{
					-moz-transform: translate(0,-2%);
				}
				100%{
					opacity: 1;
					-moz-transform: translate(0,0%);
				}
			}

			@keyframes slideDown {
				0% {
					transform: translate(0,-100%);
				}
				50%{

					transform: translate(0,8%);
				}
				65%{
					transform: translate(0,-4%);
				}
				80%{
					transform: translate(0,4%);
				}
				95%{
					transform: translate(0,-2%);
				}
				100%{
					opacity: 1;
					transform: translate(0,0%);
				}
			}

			.slideDown{

				-webkit-animation-name: slideDown;
				-moz-animation-name: slideDown;
				animation-name: slideDown;
				
				-webkit-animation-duration: 1s;
				-moz-animation-duration: 1s;
				animation-duration: 1s;
				
				-webkit-animation-timing-function: ease;
				-moz-animation-timing-function: ease;
				animation-timing-function: ease;

				-webkit-animation-delay: 0s;
				-moz-animation-delay: 0s;
				animation-delay: 0s;

				-webkit-animation-fill-mode: forwards;
				-moz-animation-fill-mode: forwards;
				animation-fill-mode: forwards;
			}


			@-webkit-keyframes slideUp {
				0% {
					-webkit-transform: translate(0,100%);
				}
				50%{
					-webkit-transform: translate(0,-8%);
				}
				65%{
					-webkit-transform: translate(0,4%);
				}
				80%{
					-webkit-transform: translate(0,-4%);
				}
				95%{
					-webkit-transform: translate(0,2%);
				}
				100%{
					opacity: 1;
					-webkit-transform: translate(0,0%);
				}
			}

			@-moz-keyframes slideUp {
				0% {
					-moz-transform: translate(0,100%);
				}
				50%{
					-moz-transform: translate(0,-8%);
				}
				65%{
					-moz-transform: translate(0,4%);
				}
				80%{
					-moz-transform: translate(0,-4%);
				}
				95%{
					-moz-transform: translate(0,2%);
				}
				100%{
					opacity: 1;
					-moz-transform: translate(0,0%);
				}
			}

			@keyframes slideUp {
				0% {
					transform: translate(0,100%);
				}
				50%{

					transform: translate(0,-8%);
				}
				65%{
					transform: translate(0,4%);
				}
				80%{
					transform: translate(0,-4%);
				}
				95%{
					transform: translate(0,2%);
				}
				100%{
					opacity: 1;
					transform: translate(0,0%);
				}
			}

			.slideUp{

				-webkit-animation-name: slideUp;
				-moz-animation-name: slideUp;
				animation-name: slideUp;
				
				-webkit-animation-duration: 1s;
				-moz-animation-duration: 1s;
				animation-duration: 1s;
				
				-webkit-animation-timing-function: ease;
				-moz-animation-timing-function: ease;
				animation-timing-function: ease;

				-webkit-animation-delay: 3.5s;
				-moz-animation-delay: 3.5s;
				animation-delay: 3.5s;

				-webkit-animation-fill-mode: forwards;
				-moz-animation-fill-mode: forwards;
				animation-fill-mode: forwards;
			}

			.bonestagram_screenshot{
				opacity: 0;
			}

			.ui_container{
				position: relative;
			}

			.ui_container #ui_text{
				color: #333333;
				text-transform: uppercase;
				letter-spacing: 3px;
				position: absolute;
				top: 20px;
			}

			#screenshot_btn, #save_btn, #ui_text{
				display: none;
			}

			.ui_container button{
				color: #333333;
				text-transform: uppercase;
				letter-spacing: 3px;
				background: none;
				padding: 15px 25px;
				border: 1px #333333 solid;
				border-radius: 4px;
				cursor: pointer;
				outline: 0;
				opacity: 0;
			}

			.ui_container button:hover{
				color: #ffffff;
			}

			.ui_container button:before {
				content: "";
				position: absolute;
				background: #333333;
				top: 100%;
				bottom: 0;
				left: 0;
				right: 0;
				z-index: -1;

				-webkit-transition: top 0.1s ease-in;
				-moz-transition: top 0.1s ease-in;
				transition: top 0.1s ease-in;
			}

			.ui_container button:hover:before {
				top: 0;
			}
		</style>
		<link rel="stylesheet" href="css/bonestagram.css">
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.0.0/jquery.min.js"></script>
		<script src="bin/bonestagram.bundle.js"></script>
		<script>
			var loadUserImage = function(event){
				console.log('load user image');
				var reader = new FileReader();
				reader.onload = function(){
					var dataURL = reader.result;
					$('#userimg').attr("src", dataURL);
				}
				reader.readAsDataURL(event.target.files[0]);
			}
			var main = function(){
				Bonestagram.init();
				$('#start_btn').click(function(){
					Bonestagram.startFace();
					$('#start_btn').hide();
					$('#screenshot_btn').css('display','block');
					$('#screenshot_btn').addClass('slideUp');
				});
				$('#screenshot_btn').click(function(){
					Bonestagram.screenshot();
					$('.bonestagram_screenshot').addClass('slideDown');
					$('.bonestagram_container').hide();
					$('#screenshot_btn').hide();
					$('#save_btn').css('display','block');
					$('#save_btn').addClass('slideUp');
					$('#ui_text').css('display','block');
					$('#ui_text').addClass('fadeOut');
				});
				$('#save_btn').click(function(){
					var a = document.createElement('a');
					a.href = $('.bonestagram_screenshot').attr('src');
					a.download = 'my-bonestagram.png';
					a.click();
				})
			}
			window.onload = main;
		</script>
	</head>
	<body>
		<div class="container" id="container1">
			<img class="bonestagram_screenshot"></img>
			<div class="bonestagram_container fadeIn">
				<video class="bonestagram_video" width="400" height="300" preload="auto">
				</video>
				<canvas class="bonestagram_face_overlay" width="400" height="300"></canvas>
				<canvas class="bonestagram_gl" width="400" height="300"></canvas>
				<canvas class="bonestagram_hand_overlay" width="400" height="300"></canvas>
			</div>
			<div class="ui_container">
				<div id="ui_text">Screenshot!</div>
				<button id="start_btn" class="slideUp"> Start Visualisation</button>
				<button id="screenshot_btn" > Take Screenshot</button>
				<button id="save_btn" > Save To Computer</button>
			</div>
			<img id="myImg" class="hide bonestagram_img" src="./media/xray.png"></img>
		</div>
		<div class="container" id="container2">
			<h2>What is Bonestagram?</h2>
			<p>Bonestagram is a web app for medical image visualisation.</p>
			<p>We hope to encourage everyone to collect their own medical images & have some fun with them. (:</p>
			<button id="upload_btn">Try with your image</button>

			<input type="file" id="myFile" accept="image/*" mutiple="false" onChange="loadUserImage(event)">
		</div>
		<div class="container" id="container3">
			<img id="userimg"></img>
		<!-- 	
			<h2>
				Create Your Own Bonestagram
			</h2>
			<h2>
				FAQ
			</h2>
			<h2>
				View Documentation
			</h2>
			<h2>
				More Biological Data Visualisation
			</h2>
		-->
		</div>

	</body>
</html>
